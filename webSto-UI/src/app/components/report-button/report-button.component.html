<div ngbDropdown class="d-inline-block" placement="auto">
  <button class="btn btn-sm btn-buro-green" id="reports-dropdown" [disabled]="isDownloading || model == null" ngbDropdownToggle>
    <span *ngIf="withPrint">
      <i class="fas fa-print"></i>
    </span>
    <span *ngIf="!withPrint">
      <i class="fas fa-download"></i>
    </span>
    <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
  </button>
  <div ngbDropdownMenu aria-labelledby="reports-dropdown">
    <button class="dropdown-item" (click)="downloadReport('ORDER', 'Заказ-наряд', false)" [disabled]="isDownloading">
      Заказ-наряд
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
    <button class="dropdown-item" (click)="downloadReport('ORDER', 'Заказ-наряд', true)" [disabled]="isDownloading">
      Заказ-наряд (с печатью)
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
    <button class="dropdown-item" (click)="downloadReport('ORDER_ACT', 'Акт на выполненные работы', false)" [disabled]="isDownloading">
      Акт на выполненные работы
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
    <button class="dropdown-item" (click)="downloadReport('ORDER_ACT', 'Акт на выполненные работы', true)" [disabled]="isDownloading">
      Акт на выполненные работы (с печатью)
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
    <button class="dropdown-item" (click)="downloadReport('ORDER_REQUEST', 'Заявка на ремонт автомобиля', false)" [disabled]="isDownloading">
      Заявка на ремонт автомобиля
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
    <button class="dropdown-item" (click)="downloadReport('ORDER_INSPECTION', 'Акт осмотра', false)" [disabled]="isDownloading">
      Акт осмотра
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
    <button class="dropdown-item" (click)="downloadReport('ORDER_TRANSFER', 'Универсальный передаточный документ', false)" [disabled]="isDownloading">
      Универсальный передаточный документ
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
    <button class="dropdown-item" (click)="downloadReport('ORDER_TRANSFER', 'Универсальный передаточный документ', true)" [disabled]="isDownloading">
      Универсальный передаточный документ (с печатью)
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
    <button class="dropdown-item" (click)="downloadReport('ORDER_TASK', 'Задание на ремонтные работы', false)" [disabled]="isDownloading">
      Задание на ремонтные работы
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
    <button class="dropdown-item" (click)="downloadReport('ORDER_REQUIREMENT', 'Требование на запчасти', false)" [disabled]="isDownloading">
      Требование на запчасти
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
    <button class="dropdown-item" (click)="downloadReport('ORDER_RECEIPT', 'Расписка о приеме автомобиля', false)" [disabled]="isDownloading">
      Расписка о приеме автомобиля
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
    <button class="dropdown-item" (click)="downloadReport('ORDER_DEFECTION', 'Акт дефектовки', false)" [disabled]="isDownloading">
      Акт дефектовки
      <span *ngIf="isDownloading">&nbsp;<i class="fas fa-spin fa-spinner"></i></span>
    </button>
  </div>
</div>

<!-- Modal -->
<ng-template #content let-modal *ngIf="withPrint">
  <div class="modal-header">
    <h3 class="modal-title">{{modalTitle}}</h3>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <pdf-viewer [src]="pdfSrc"
                [render-text]="true"
    ></pdf-viewer>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-sm btn-buro-green" (click)="save()">Сохранить как...</button>
    <button type="button" class="btn btn-sm btn-buro-green" (click)="print()">Распечатать</button>
    <button type="button" class="btn btn-sm btn-buro-green" (click)="modal.dismiss()">Закрыть</button>
  </div>
</ng-template>
